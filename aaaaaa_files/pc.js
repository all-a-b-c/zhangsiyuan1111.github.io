function vistaCallback(t){pullContent.setVistaContentBuffer(t[pullContent.getCurrentDate()]),pullContent.insertVistaContent(),pullContent.isFirstTime()||pullContent.insertVistaContent(6)}function discountCallback(t){pullContent.setDiscountContentBuffer(t.data),pullContent.insertDiscountContent(),pullContent.isFirstTime()||pullContent.insertDiscountContent(6)}function courseIELTSCallback(t){pullContent.setCourseContentBuffer(t.result,"IELTS"),pullContent.insertCourseContent(6,"IELTS"),pullContent.isFirstTime()||pullContent.insertCourseContent(6,"IELTS")}function courseCETCallback(t){pullContent.setCourseContentBuffer(t.result,"CET"),pullContent.insertCourseContent(6,"CET"),pullContent.isFirstTimeCourse()||pullContent.insertCourseContent(6,"CET")}function courseKaoyanSCallback(t){pullContent.setCourseContentBuffer(t.result,"Kaoyan"),pullContent.insertCourseContent(6,"Kaoyan"),pullContent.isFirstTimeCourse()||pullContent.insertCourseContent(6,"Kaoyan")}function courseGRECallback(t){pullContent.setCourseContentBuffer(t.result,"GRE"),pullContent.insertCourseContent(6,"GRE"),pullContent.isFirstTimeCourse()||pullContent.insertVistaContent(6)}function coursePracticalCallback(t){pullContent.setCourseContentBuffer(t.result,"Practical"),pullContent.insertCourseContent(6,"Practical"),pullContent.isFirstTimeCourse()||pullContent.insertVistaContent(6)}function sideCourseCallback(t){pullContent.insertSideCourseContent(t.data)}!function(){youdaos&&youdaos.events.listen(window,"load",function(){form=new youdaos.Autocomplete("translateContent","form","","","","","translateType"),form.setSearchServer("./w/"),form.setSugServer("http://dsuggest.ydstatic.com"),form.submitForm("form"),form.setKeyFrom("dict2.index"),form.setOffset(-10,15.5)})}(),function(){var t=$("#form"),e=$("#translateContent"),n=$("#translateType");t.submit(function(t){return t.preventDefault(),""==e.val()?void location.reload():void(window.location="./w/"+n.val()+"/"+e.val()+"/#keyfrom=dict2.index")})}(),function(){var t=$("#nav ul li.scholar"),e=new Date;e.setFullYear(e.getFullYear()+1),t.click(function(n){n.preventDefault(),document.cookie="firstTime=true; expires="+e.toGMTString(),window.location=t.find("a").attr("href")});var n=document.cookie.split("; "),o={};for(var a in n)o[n[a].split("=")[0]]=n[a].split("=")[1];"true"===o.firstTime&&t.removeClass("scholar")}(),function(){var t=$("#more"),e=$("#more div:first-child"),n=t.find(".menu"),o=t.find(".menu li");t.hover(function(){n.show(),_rlog.push(["_trackEvent","tab.more"]),e.addClass("active"),o.show()},function(){n.hide(),e.removeClass("active")})}(),function(){var t=$("#selectType"),e=$("#typeList"),n=$("#type"),o=$("#translateType"),a=t.find(".arrow"),i={"中英":"eng","中法":"fr","中韩":"ko","中日":"jap"};o.val("eng"),t.click(function(t){if("LI"!=t.target.tagName)e.toggle(),a.toggleClass("arrow-up");else{var s=$(t.target);n.text(s.html()),o.val(i[s.html()]),e.hide(),a.removeClass("arrow-up")}t.stopPropagation()}),$(document).click(function(t){e.hide(),a.removeClass("arrow-up")})}(),function(){function t(n){var r=i.scrollTop();r>s&&(o.addClass("settop"),a.fadeIn(),i.scroll(e),i.unbind("scroll",t))}function e(n){var r=i.scrollTop();s>r&&(o.removeClass("settop"),a.hide(),i.scroll(t),i.unbind("scroll",e))}var n=$("#search"),o=n.find(".wrap"),a=n.find(".logo"),i=$(window),s=n.offset().top-20;n.css("height",n.height()+"px"),i.scroll(t)}(),function(){function t(n){var s=i.scrollTop();s>a&&(o.addClass("attach"),i.scroll(e),i.unbind("scroll",t))}function e(n){var s=i.scrollTop();a>s&&(o.removeClass("attach"),i.scroll(t),i.unbind("scroll",e))}var n=$("#doc2 .fr"),o=$("#doc2 .fr .popout"),a=n.offset().top-135,i=$(window);i.scroll(t)}(),function(){var t=$("#backToTop");$(window).scroll(function(){var e=$(window).scrollTop();e>700?t.show():t.hide()}),t.click(function(){$(window).scrollTop(0)})}(),function(){function t(n){var s=$(window).scrollTop(),r=s-i;0>r&&s>a&&(o.addClass("attach"),o.slideDown(),$(window).scroll(e),$(window).unbind("scroll",t)),i=s}function e(n){var s=$(window).scrollTop(),r=s-i;r>0&&s>a?(o.removeClass("attach"),$(window).scroll(t),$(window).unbind("scroll",e)):0>r&&a>s&&(o.removeClass("attach"),o.show(),$(window).scroll(t),$(window).unbind("scroll",e)),i=s}var n=$("#doc2 .fl .channel"),o=$("#doc2 .fl .popout"),a=n.offset().top-80,i=0;n.height(o.height()),$(window).scroll(t)}(),$("input, textarea").placeholder(),$("#translateContent").focus();var pullContent=window.pullContent||{};pullContent.global=this,function(t){var e,n,o,a,s=$('<div class="news"><a href="" target="_blank"><img src="" alt=""></a><div class="news-detail"><h3><a href="" class="title" target="_blank"></a></h3><p class="summary"></p><div class="note1"><span class="icon_comment"></span><span class="comment"></span><span class="icon_like"></span><span class="like"></span></div><div class="note2"><span class="type"></span><span class="date"></span></div></div></div>'),r=$('<div class="course"><a href="" target="_blank"><img src="" alt=""><div class="time"></div></a><h3><a href="" target="_blank"></a></h3><div class="price"><span>￥</span></div><div class="name"></div></div>'),l=$('<div class="goods"><a href="" target="_blank"><img src="" alt=""></a><div class="goods-detail"><h3><a href="" target="_blank"><span></span></a></h3><p></p></div></div>'),c=$("#footer"),u=$("#vista"),d=$("#course"),p=$("#discount"),f=$("#doc2 .fl .popout span"),C=$("#doc2 .hint"),h=$("#doc2 .icon_arrow"),m="insertVistaContent",v=!0,w=!0,g="IELTS",k={},b={deal:"http://www.huihui.cn/deals/",shared_article:"http://www.huihui.cn/share/",goods_list:"http://www.huihui.cn/qingdan/"},y=$("#doc2 .fl .channel"),x={insertVistaContent:!0,insertCourseContent:!0,insertDiscountContent:!0},T="http://dict.youdao.com/infoline?apiversion=2&mode=publish&client=deskdict&keyfrom=dict2.index&startDate=",D="",E=new Date;t.getCurrentDate=function(){return D},t.isFirstTime=function(){return v},t.isFirstTimeCourse=function(){return w},t.createVistaDOMElement=function(t){var e=s.clone(),n=e.find("img"),o=e.find(".like"),a=e.find(".type"),i=e.find(".date");e.find("a").attr("href",t.url+"?keyfrom=dict2.index"),n.attr("src",t["image-mobile2"]),n.attr("alt",t.title),e.find("h3 a").text(t.title),e.find("p").text(t.summary),e.find(".comment").text(t.comment),o.text(t.like),a.text(t.type);var r=t.time,l=parseInt(r/1e6%100),c=parseInt(r/1e4%100),u=parseInt(r/100%100);10>u&&(u="0"+u);var d=parseInt(r%100);return 10>d&&(d="0"+d),i.text(l+"-"+c+" "+u+":"+d),e},t.createCourseDOMElement=function(t){var e=r.clone(),n=e.find("img");e.find("a").attr("href","http://xue.youdao.com/course/detail/"+t.id+"?vendor=youdaoshouye_cof_bibeikecheng"),n.attr("src",t.image),n.attr("alt",t.title),e.find(".time").text(t.time),e.find("h3 a").text(t.title),0===t.price?(e.find(".price").addClass("free"),e.find(".price").text("免费")):e.find(".price").append(t.price);var o=[];for(i in t.teacher)o.push(t.teacher[i].name);return e.find(".name").text(o.join(",")),e},t.createDiscountDOMElement=function(t,e,n,o,a,i){var s=l.clone(),r=s.find("img"),c=b[a]+i;return s.find("a").attr("href",c+"?keyfrom=dict2.index"),r.attr("src",t),r.attr("alt",e+n),s.find(".goods-detail h3 a").prepend(e.replace(/<\/?[^>]*>/g,"")),s.find(".goods-detail h3 span").text(n),s.find(".goods-detail p").prepend(String.prototype.replace.call(String.prototype.slice.call(o,0,60),/<\/?[^>]*>/g,"")+"..."),s},t.calculateDate=function(t){var e=t||0;E.setDate(E.getDate()+e);var n=E.getFullYear(),o=E.getMonth()+1;10>o&&(o="0"+o);var a=E.getDate();10>a&&(a="0"+a),D=n+"-"+o+"-"+a},t.insertVistaContent=function(e){if("insertVistaContent"===m&&(C.text("加载中..."),h.show()),o){var n,a=document.createDocumentFragment(),i={},s=e||2;for(n=0;s>n;n++){do i=o.shift();while(i&&"adv"===i.style.slice(0,3));if(!i)return t.calculateDate(-1),void t.excuteCall(T+D+"&callback=vistaCallback");$(a).append(t.createVistaDOMElement(i))}u.append(a),"insertVistaContent"===m&&(C.text("下滑加载更多"),h.show()),x.insertVistaContent=!0}},t.insertCourseContent=function(e,n){if("insertCourseContent"===m&&(C.text("加载中..."),h.show()),k.IELTS){var o,a=document.createDocumentFragment(),i={};for(o=0;e>o;o++){if(i=k[n].shift(),!i)return $("#"+n).append(a),C.text("已到底"),h.hide(),void(x.insertCourseContent=!0);$(a).append(t.createCourseDOMElement(i))}$("#"+n).append(a),"insertCourseContent"===m&&(C.text("下滑加载更多"),h.show()),x.insertCourseContent=!0}},t.insertDiscountContent=function(e){if("insertDiscountContent"===m&&(C.text("加载中..."),h.show()),a){var n,o=document.createDocumentFragment(),i={},s=e||2,r="";for(n=0;s>n;n++){if(i=a.shift(),!i)return void t.excuteCall("http://www.huihui.cn/deals/channel.json?callback=discountCallback&max_time="+Date.parse(r));r=i.pub_time,$(o).append(t.createDiscountDOMElement(i.image_url,i.title,i.sub_title,i.comment,i.channel,i.content_id))}p.append(o),"insertDiscountContent"===m&&(C.text("下滑加载更多"),h.show()),x.insertDiscountContent=!0}},t.excuteCall=function(t){var e=$("<script type='text/javascript' src='"+t+"' charset='utf-8'></script>");$("#callback").append(e[0])},t.scrollhandler=function(e){var n=$(window);x[m]&&$(document).height()-n.height()-n.scrollTop()<200&&(x[m]=!1,t[m](6,g))},t.wheelhandler=function(e){return e.deltaY>0||!e.deltaY&&40!=e.which&&34!=e.which?void 0:v?(v=!1,$("#course .cate").removeClass("start"),$("#discount").removeClass("start"),c.addClass("set-bottom"),$(window).scroll(t.scrollhandler),x.insertVistaContent=!1,t.insertVistaContent(6,g),x.insertCourseContent=!1,t.insertCourseContent(6,g),x.insertDiscountContent=!1,void t.insertDiscountContent(6,g)):void(x[m]&&$(window).height()+$(window).scrollTop()==$(document).height()&&(x[m]=!1,t[m](6,g)))},t.setVistaContentBuffer=function(t){o=t},t.setDiscountContentBuffer=function(t){a=t},t.setCourseContentBuffer=function(t,e){k[e]=t},$("#doc2 .fl .container span:first-child").click(function(t){var e=y.offset().top-90,n=$(document).scrollTop();e=Math.min(e,n),u.show(),d.hide(),p.hide(),f.removeClass("active"),$(t.target).addClass("active"),m="insertVistaContent",$(window).scrollTop(e),C.text("下滑加载更多"),h.show(),_rlog.push(["_trackEvent","tab.vista"])}),$("#doc2 .fl .container span:nth-child(2)").click(function(e){var n=y.offset().top-90,o=$(document).scrollTop();n=Math.min(n,o),u.hide(),d.show(),p.hide(),f.removeClass("active"),$(e.target).addClass("active"),m="insertCourseContent",$(window).scrollTop(n),C.text("下滑加载更多"),h.show(),w&&(w=!1,t.insertCourseContent(6,"Kaoyan"),t.insertCourseContent(6,"CET"),t.insertCourseContent(6,"GRE"),t.insertCourseContent(6,"Practical")),_rlog.push(["_trackEvent","tab.course"])}),$("#doc2 .fl .container span:last-child").click(function(t){var e=y.offset().top-90,n=$(document).scrollTop();e=Math.min(e,n),u.hide(),d.hide(),p.show(),f.removeClass("active"),$(t.target).addClass("active"),m="insertDiscountContent",$(window).scrollTop(e),C.text("下滑加载更多"),h.show(),_rlog.push(["_trackEvent","tab.huihui"])}),$("#course .category").click(function(t){t.stopPropagation();var e=["CET","Kaoyan","GRE","IELTS","Practical"],n=$("#course .category span").index(t.target);-1!=n&&($("#course .category span").removeClass("active"),$(t.target).addClass("active"),$("#course .cate").hide(),$("#"+e[n]).show(),g=e[n]),C.text("下滑加载更多"),h.show(),_rlog.push(["_trackEvent","tab.course."+e[n]])}),t.calculateDate(),t.excuteCall(T+D+"&callback=vistaCallback"),t.excuteCall("http://xue.youdao.com/api/course/list/23/1.jsonp?callback=courseIELTSCallback"),t.excuteCall("http://www.huihui.cn/deals/channel.json?callback=discountCallback"),t.excuteCall("http://xue.youdao.com/api/course/list/1/1.jsonp?callback=courseCETCallback"),t.excuteCall("http://xue.youdao.com/api/course/list/7/1.jsonp?callback=courseKaoyanSCallback"),t.excuteCall("http://xue.youdao.com/api/course/list/2/1.jsonp?callback=courseGRECallback"),t.excuteCall("http://xue.youdao.com/api/course/list/3/1.jsonp?callback=coursePracticalCallback"),$(window).mousewheel(t.wheelhandler),$(window).keydown(t.wheelhandler),$(window).bind("touchstart",function(t){e=t.originalEvent.changedTouches[0].clientY}),$(window).bind("touchmove",function(t){if(n=t.originalEvent.changedTouches[0].clientY,e-100>n){var o=$.Event("keydown");o.which=40,$("input").trigger(o)}})}(pullContent),function(t){var e=$('<div class="commodity"><a href="" target="_blank"><img src="" alt=""></a><div class="commodity-detail"><a target="_blank" href=""><h3></h3></a><p class="userNum"></p><p class="price"><span>￥</span></p></div></div>'),n=$("#doc2 .fr .bd");document.createDocumentFragment();t.createSideCourseDOMElement=function(t){var n=e.clone(),o=n.find("img");return"course"===t.type?(n.find("a").attr("href","http://xue.youdao.com/course/detail/"+t.courseId+"?vendor=youdaoshouye_cof_youbianlan"),o.attr("src",t.courseImgUrl),o.attr("alt",t.courseTitle),n.find("h3").text(t.courseTitle),t.hideRegNum||n.find(".userNum").text("已报名："+t.userNum+"人"),n.find(".price").append(t.courseSalePrice)):"tuiguang"===t.type&&(n.find("a").attr("href",t.link.split("?")[0]+"?vendor=youdaoshouye_cof_youbianlan"),o.attr("src",t.img),o.attr("alt",t.title),n.find("h3").text(t.title),n.find(".userNum").text(""),n.find(".price").text("")),n},t.insertSideCourseContent=function(e){var o,a=document.createDocumentFragment(),i={};for(o=0;3>o;o++)i=e.shift(),i&&$(a).append(t.createSideCourseDOMElement(i));n.append(a)},t.excuteCall("http://xue.youdao.com/api/course/recommend.jsonp?type=youdaoweb&callback=sideCourseCallback")}(pullContent);